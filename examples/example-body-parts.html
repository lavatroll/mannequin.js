<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Example</title>
    <link rel="stylesheet" href="./example.css">
  </head>
  <body>
    <script type="module">
      import { Male, createScene, sin, rad } from '../mannequin.mjs'
      import { addLabel } from './fonts/label.mjs'

      const man = new Male()
      man.position.y -= 4

      man.turnRight = 90

      man.l_fingers.bend = 20
      man.r_fingers.bend = 20

      man.l_leg.straddle = 30
      man.r_leg.straddle = 30

      man.l_ankle.tilt = 30
      man.r_ankle.tilt = 30

      addLabel(man.body, 'body', -27, 1.5, 0).scale.set(3, 3, 3)
      addLabel(man.head, 'head', 8)
      addLabel(man.neck, 'neck', 0, 0.5, 3)
      addLabel(man.torso, 'torso', 7, 0.5, 3)
      addLabel(man.pelvis, 'pelvis', 0, 0.5, 2)

      addLabel(man.l_arm, 'l_arm', 2, -0.3, 0, 3, 2)
      addLabel(man.l_elbow, 'l_elbow', 3, -0.15, 0, 3, 2)
      addLabel(man.l_wrist, 'l_wrist', 0, 0, 1, 2, 2)
      addLabel(man.l_fingers, 'l_fingers', 1, 0, 1, 2, 2).scale.set(0.75, 0.75, 0.75)

      addLabel(man.r_arm, 'r_arm', 2, 1.3, 0, 3, 2)
      addLabel(man.r_elbow, 'r_elbow', 3, 1.2, 0, 3, 2)
      addLabel(man.r_wrist, 'r_wrist', 0, 0, 11.5, 0, 2)
      addLabel(man.r_fingers, 'r_fingers', 1, 0, 10.5, 0, 2).scale.set(0.75, 0.75, 0.75)

      addLabel(man.l_leg, 'l_leg', 5, 0.5, 0, 1, 1.98)
      addLabel(man.l_knee, 'l_knee', 4, 0.25, 0, 1, 1.92)
      addLabel(man.l_ankle, 'l_ankle', 1, 0.3, -1, 1, 2, 0)

      addLabel(man.r_leg, 'r_leg', 5, -1.55, 0, 1, 2.02)
      addLabel(man.r_knee, 'r_knee', 4, -1.25, 0, 1, 2.08)
      addLabel(man.r_ankle, 'r_ankle', 1, -1.2, -1, 1, 2, 0)

      function animate(t) {
        man.head.turn = -45 * sin(t / 2 - 20)

        man.torso.tilt = -15 * sin(t / 2 - 10)

        man.l_arm.straddle = 55 - 30 * sin(t / 2)
        man.r_arm.straddle = 55 + 30 * sin(t / 2)

        man.l_elbow.bend = 30 + 30 * sin(t / 2)
        man.r_elbow.bend = 30 - 30 * sin(t / 2)

        man.l_wrist.bend = 25 + 15 * sin(t / 2)
        man.r_wrist.bend = 25 - 15 * sin(t / 2)

        man.l_fingers.bend = 40 + 20 * sin(t / 2)
        man.r_fingers.bend = 40 - 20 * sin(t / 2)

        scene.rotation.y = rad(45 * sin(t / 2))
      }
      const { scene } = createScene(document.body, animate)
      scene.add(man)
    </script>
  </body>
</html>
